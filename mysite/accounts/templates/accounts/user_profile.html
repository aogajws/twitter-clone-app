{% extends 'base.html' %}
{% load static %}

{% block title %}メインページ{% endblock title %}

{% block content %}
<div class="container" id="profile_page">
    <div class="row">
        <div class="col-2 p-3 border rounded" id="user_status">
            <div class="container">
                {% if User.icon %}
                    <img class="img-thumbnail" src="{{ User.icon.url }}">
                {% else %}
                    <img class="img-thumbnail" src="{% static 'images/user_icon.png' %}">
                {% endif %}
            </div>
            <div class="container mt-2" id="username">
                <h2>@{{ User.username }}</h2>
            </div>
            <div class="mt-3" id="bio">
                {% if User.introduction %}
                    <h6>{{ User.introduction }}</h6>
                {% endif %}
            </div>
            <div class="container mt-3" id="following_count">
                <h6>フォロー {{ following_count }}人</h6>
                <h6>フォロワー {{ follower_count }}人</h6>
            </div>
            <div class="container mt-3">
                {% if User.username == request.user.username %}
                {% elif is_following %}
                    <a href="{% url "accounts:remove" User.username %}" type="submit" class="btn btn-outline-primary" id="remove">フォロー解除</a>
                {% else %}
                    <a href="{% url "accounts:follow" User.username %}" type="submit" class="btn btn-primary" id="follow">フォローする</a>
                {% endif %}
            </div>
        </div>
        <div class="col-8 p-3" id="user_post">
            <h2>{{ User.username }}さんのTweet一覧</h2>
            {% if post_list %}
                {% for post in post_list %}
                    <div class="row mt-2 border">
                        <div class="col-1">
                            <a href={% url 'accounts:profile' post.author.username %}>
                                {% if post.author.icon %}
                                    <img class="align-self-center img-thumbnail" src="{{ post.author.icon.url }}" width="100" height="100">
                                {% else %}
                                    <img class="align-self-center img-thumbnail" src="{% static 'images/user_icon.png' %}" width="100" height="100">
                                {% endif %}
                            </a>
                        </div>
                        <div class="col-9">
                            <h4 class=""><a class="text-dark" href={% url 'accounts:profile' post.author.username %}>@{{ post.author }}</a></h4>
                            <p class="">
                                {{ post.content }}
                            </p>
                            <a href="{% url "post:favorite" post.pk %}" class="d-inline-block">☆いいね {{post.likes}}</a>
                            <h6 class="d-inline-block text-muted">{{ post.created_at }}</h6>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <h5>Tweetはまだありません</h5>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
